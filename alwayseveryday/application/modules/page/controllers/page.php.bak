<?php

class Page extends CI_Controller {
	
	function __construct(){
	parent::__construct();
	$this->load->model('pagemod');
	}
	
	function index(){
	$data['query'] = $this->pagemod->getData();
	$this->load->view('showpage',$data);
	}
	
	function pageindex($id){
	$query = $this->pagemod->get($id);
	$data['fpage_title']    = $query['page_title'];
	$data['fauthor'] = $query['author'];
	$data['ftitle'] = $query['title'];
	$data['fpage_content']= $query['page_content'];
	$this->load->view('showpage',$data);
	}

	function pageinsert(){
	$data['query'] = $this->pagemod->getData();
	$this->load->view('page_input',$data);
	}
	
	function look(){
	$data['query'] = $this->pagemod->getData();
	$this->load->view('page_edit',$data);
	}
	
	function submit(){
	if ($this->input->post('submit')){
		if ($this->input->post('id')){
		$this->pagemod->update();
		redirect('/page/look','refresh');
		}else{
		$this->pagemod->save();
		redirect('/page/look','refresh');
		}
		}
	}

	function delete($id){
	$this->db->delete('page', array('id' => $id));
	redirect('/page/look','refresh'); 
	}
	
	function edit($id){
	$query          = $this->pagemod->get($id);
	$data['fid']    = $query['id'];
	$data['fpage_title']    = $query['page_title'];
	$data['fauthor'] = $query['author'];
	$data['ftitle'] = $query['title'];
	$data['fpage_content']= $query['page_content'];
	$this->load->view('page_ed',$data);
	}
}

?>
